
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>AoboSir 博客</title>
  <meta name="author" content="Aobo Jaing">

  
  <meta name="description" content="我之前写过在Linux系统或者树莓派上使用ipclient上网的教程，但是自从 2016年9月1号，学校换了新的ipclient出校器后，我之前记录的那些方法都不能使用了。 下面介绍一种新的方法。这个方法我已经测试过，可行！！ 树莓派等开发板（比如pcduino） 使用ipclient出校器上网 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://aobojaing.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/git@github.com:AoboJaing/atom.xml" rel="alternate" title="AoboSir 博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->


  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">AoboSir 博客</a></h1>
  
    <h2>仍然自由自我 永远高唱我歌</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/git@github.com:AoboJaing/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.baidu.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="aobojaing.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://blog.csdn.net/github_35160620">CSDN</a></li>
  <li><a href="/aboutme">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/03/06/Linux-Raspberry-Pi-use-guet-ipclient-Internet/">Linux 如何使用桂电ipclient出校器上网 --- 最新的方法 --- 可以使用</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-03-06T19:20:43+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>7:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>我之前写过在Linux系统或者树莓派上使用ipclient上网的教程，但是自从 2016年9月1号，学校换了新的ipclient出校器后，我之前记录的那些方法都不能使用了。</p>

<p>下面介绍一种新的方法。这个方法我已经测试过，可行！！</p>

<hr />

<h2>树莓派等开发板（比如pcduino） 使用ipclient出校器上网</h2>

<p>对于树莓派，如果你在桂电这个学校，如果一个初学者，你手头没有一个树莓派专用的Wifi USB无线模块的话，你都不知道如何使用网线让你的树莓派连接外网。</p>

<p>下面介绍一个方法，你学会了这个方法后，你没有树莓派Wifi USB专用模块，只需要一根网线，就可以上网。（前提是：我没有在宿舍试过。）</p>

<hr />

<p>到GitHub上，下载这个网站里面的源代码：<a href="https://github.com/xuzhipengnt/ipclient_gxnu">https://github.com/xuzhipengnt/ipclient_gxnu</a></p>

<p>下载完成后，在终端中来到刚刚下载后的源代码的这个路径下：<code>ipclient_gxnu /ipclient_python/</code></p>

<p>我们先使用文本编辑器打开这个路径里面的<code>ipclient.py</code>文件，然后修改一个地方：</p>

<p><img src="/images/2017-3-6-Linux-Raspberry-Pi-use-guet-ipclient-Internet/1488798468322.png" alt="Alt text" /></p>

<p>将第8行的代码修改为：（如果你是桂电的，需要修改；但是如果你是师大的，就不需要改动。）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">server</span> <span class="o">=</span>  <span class="s">&#39; 172.16.1.1 &#39;</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>广西师范大学的服务器地址为：202.193.160.123</p>

<p>桂林电子科大服务器地址为：172.16.1.1</p></blockquote>

<p>保存文件后，执行下面的命令：</p>

<blockquote><p>在执行下面的命令之前，你需要树莓派连接网线。</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">sudo</span> <span class="n">chmod</span> <span class="mi">777</span> <span class="n">ipclient</span><span class="o">.</span><span class="n">py</span>
</span><span class='line'><span class="n">python</span> <span class="n">ipclient</span><span class="o">.</span><span class="n">py</span>
</span></code></pre></td></tr></table></div></figure>


<p>如果你看到下面的输出：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">pi</span><span class="nd">@raspberrypi</span><span class="p">:</span><span class="o">~/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">ipclient_gxnu</span><span class="o">/</span><span class="n">ipclient_python</span> <span class="err">$</span> <span class="n">python</span> <span class="n">ipclient</span><span class="o">.</span><span class="n">py</span>
</span><span class='line'><span class="n">IP</span> <span class="n">Client</span> <span class="k">for</span> <span class="n">GXNU</span>  <span class="p">(</span><span class="n">xzpmail</span><span class="nd">@gmail.com</span><span class="p">)</span>
</span><span class='line'><span class="o">...........................................</span>
</span><span class='line'><span class="n">Please</span> <span class="nb">input</span> <span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">:</span>
</span><span class='line'><span class="n">Username</span><span class="p">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个时候，你输入你的学号和密码，就可以上网了。</p>

<p><img src="/images/2017-3-6-Linux-Raspberry-Pi-use-guet-ipclient-Internet/1488798987751.png" alt="Alt text" /></p>

<h2>搞定</h2>

<hr />

<h2>Linux系统（比如：Ubuntu） 使用ipclient出校器上网</h2>

<p>同理。就不啰嗦了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/28/solve-qt-opencv-exited-with-code-0xc0000135--1073741515/">解决问题：Qt5 OpenCV “uring Startup Program Exited With Code 0xc0000135” “ Exited With Code -1073741515”</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-28T14:29:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>2:29 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h2>前言</h2>

<p>之前已经搭建好的Qt5 和 OpenCV的环境（并且我之前写过博文，在<a href="http://blog.csdn.net/github_35160620/article/details/52364252">这里</a>），今天我运行了一下之前可以运行的程序， 竟然出现了问题：</p>

<p>代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp">#include &lt;QCoreApplication&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/highgui/highgui.hpp&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/imgproc/imgproc.hpp&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/core/core.hpp&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">QCoreApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">&quot;..</span><span class="se">\\</span><span class="s">helloWorld</span><span class="se">\\</span><span class="s">image.jpg&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">cv</span><span class="o">::</span><span class="n">namedWindow</span><span class="p">(</span><span class="s">&quot;Image&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">&quot;Image&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cv</span><span class="o">::</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>配置：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="n">QT</span> <span class="o">+=</span> <span class="n">core</span>
</span><span class='line'><span class="n">QT</span> <span class="o">-=</span> <span class="n">gui</span>
</span><span class='line'>
</span><span class='line'><span class="n">CONFIG</span> <span class="o">+=</span> <span class="n">c</span><span class="o">++</span><span class="mi">11</span>
</span><span class='line'>
</span><span class='line'><span class="n">TARGET</span> <span class="o">=</span> <span class="n">helloWorld</span>
</span><span class='line'><span class="n">CONFIG</span> <span class="o">+=</span> <span class="n">console</span>
</span><span class='line'><span class="n">CONFIG</span> <span class="o">-=</span> <span class="n">app_bundle</span>
</span><span class='line'>
</span><span class='line'><span class="n">TEMPLATE</span> <span class="o">=</span> <span class="n">app</span>
</span><span class='line'>
</span><span class='line'><span class="n">SOURCES</span> <span class="o">+=</span> <span class="n">main</span><span class="p">.</span><span class="n">cpp</span>
</span><span class='line'>
</span><span class='line'><span class="n">INCLUDEPATH</span><span class="o">+=</span><span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">include</span><span class="err">\</span><span class="n">opencv</span> \
</span><span class='line'>             <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">include</span><span class="err">\</span><span class="n">opencv2</span> \
</span><span class='line'>             <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">include</span>
</span><span class='line'>
</span><span class='line'><span class="n">LIBS</span><span class="o">+=</span>  <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_calib3d2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_contrib2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_core2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_features2d2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_flann2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_gpu2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_highgui2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_imgproc2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_legacy2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_ml2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_nonfree2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_objdetect2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_ocl2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_photo2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_stitching2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_ts2410</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_video2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span><span class='line'>        <span class="nl">C</span><span class="p">:</span><span class="err">\</span><span class="n">third_packages</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">opencv2410</span><span class="o">-</span><span class="n">qt5</span><span class="err">\</span><span class="n">lib</span><span class="err">\</span><span class="n">libopencv_videostab2410</span><span class="p">.</span><span class="n">dll</span><span class="p">.</span><span class="n">a</span> \
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>出现的问题</h2>

<p>调试的时候出现了下面的错误：</p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488257248592.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488257255314.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488257261932.png" alt="Alt text" /></p>

<p>运行程序的时候，什么的没有。但是在<strong>应用程序输出栏里面有这面截图是如数</strong></p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488257401005.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488257952750.png" alt="Alt text" /></p>

<p>我简单的用语言叙述一下出现的这个问题：</p>

<p>当我点击运行的时候，程序会弹出黑色的终端窗口，在<strong>应用程序窗口</strong>里面，程序会显示自动退出，然后代码是：<strong>-1073741515</strong>。</p>

<p>我想研究一下，究竟是什么地方出现看错误，所以，我点击 <strong>调试</strong> 按钮，然后就出现了上面三个错误提示窗口。</p>

<hr />

<h2>解决办法</h2>

<p>在我没有上网上找解决办法之前，我猜测是因为我后来在电脑上安装了什么软件或者又搭建了什么环境，然后可能是影响到了Qt 和 OpenCV 的开发环境了，可能是被神不知鬼不觉的给改了什么地方。</p>

<p>网上说：是因为环境变量没有添加的原因，但是我之前都添加过环境变量了。我想可能是因为其他的软件把我添加的环境变量个删除了或者挤下去了。所以现在我来查看一下当前的环境变量：</p>

<p>通过查看，环境变量都在：</p>

<hr />

<p>我使用下面的程序测试Qt5软件。程序是可以正常运行的。正常的输出的 <code>Hello World!</code>。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp">#include &lt;QCoreApplication&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/highgui/highgui.hpp&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/imgproc/imgproc.hpp&gt;</span>
</span><span class='line'><span class="cp">#include &lt;opencv2/core/core.hpp&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">QCoreApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//    cv::Mat image = cv::imread(&quot;..\\helloWorld\\image.jpg&quot;);</span>
</span><span class='line'><span class="c1">//    cv::namedWindow(&quot;Image&quot;);</span>
</span><span class='line'><span class="c1">//    cv::imshow(&quot;Image&quot;, image);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//    cv::waitKey(0);</span>
</span><span class='line'>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello World!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>我刚刚再次查看了一下系统的环境变量，还真的发现：OpenCV-Qt的编译生成的<code>bin</code>的路径不在了。（也不知道是我之前根本就没有添加，我也忘记了）</p>

<p>将我之前编译的OpenCV-Qt的<code>bin</code>路径添加到当前的系统的环境变量里面：</p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488262534186.png" alt="Alt text" /></p>

<p>然后现在，关掉Qt软件（必须要关闭，然后重新启动）。然后重新启动Qt5软件。</p>

<p>现在再次运行程序，问题解决：</p>

<p><img src="/images/2017-2-28-solve-qt-opencv-exited-with-code-0xc0000135--1073741515/1488262593875.png" alt="Alt text" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/22/SolidWorks-how-to-modify-a-spare-parts-in-Assembly/">SolidWorks 在装配体中，如果想修改里面其中一个零部件，要怎么做</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-22T03:55:20+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2017</span></span> <span class='time'>3:55 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>但你在制作 装配体的时候，发现有个零部件零件需要修改，这个时候，我们可以这样做：</p>

<p>对着这个零部件点击鼠标左键，选择里面的 <strong>打开零件</strong> 图标工具。</p>

<p><img src="/images/2017-2-22-SolidWorks-how-to-modify-a-spare-parts-in-Assembly/1487706640968.png" alt="Alt text" /></p>

<p>这个时候，就进入了这个零部件文件里面。我们现在就可以对其进行编辑了。</p>

<p><img src="/images/2017-2-22-SolidWorks-how-to-modify-a-spare-parts-in-Assembly/1487706706951.png" alt="Alt text" /></p>

<p>当你修改完成后，记得要保存（按 <strong>Ctrl + S</strong>）。然后在点击下面截图里面的 <strong>叉号</strong> 回到装配体文件里面：</p>

<p><img src="/images/2017-2-22-SolidWorks-how-to-modify-a-spare-parts-in-Assembly/1487706784279.png" alt="Alt text" /></p>

<h1>搞定</h1>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/22/how-to-activation-Movable-joint-move-in-assembly/">SolidWorks 如果装配体里面的的装配体有动态关节，如何让它活动</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-22T03:47:59+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2017</span></span> <span class='time'>3:47 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>如果你在装配体里面插入一个装配体的话，如果被插入的装配体原本是有可动关节的，但是被插入后，可动的关节不能运动了。</p>

<p>要想让它还能动， 其他很简单，我们只需要这样做：</p>

<p>对着我们需要恢复可动的关节的转配体：</p>

<p><img src="/images/2017-2-22-how-to-activation-Movable-joint-move-in-assembly/1487706079338.png" alt="Alt text" /></p>

<p>然后将 <strong>求解为</strong> 选为 <strong>柔性(F)</strong>。（被插入到装配体中的装配体默认这一项是为 <strong>刚性&reg;</strong>的。）</p>

<p><img src="/images/2017-2-22-how-to-activation-Movable-joint-move-in-assembly/1487706131122.png" alt="Alt text" /></p>

<p>现在转配体里面的包含的装配体的可动关节就可以动了。（如果可动的关节太多，你会明显的感觉到SolidWorks软件运行有点卡。）</p>

<hr />
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/SolidWorks-2012-download-install-cracked/">Windows 10 下载、安装、破解 SolidWorks 2012 Sp5.0 软件 图文教程</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T19:33:03+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>7:33 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<ul>
<li>我使用的电脑的系统：Windows 10 64位</li>
<li>我之前在电脑里面安装过SolidWorks 2011软件，然后我又给它卸载了。</li>
</ul>


<hr />

<h2>下载</h2>

<p>下载网站：<a href="http://www.mfcad.com/solidworks/xiazai/18686.html">http://www.mfcad.com/solidworks/xiazai/18686.html</a></p>

<p>我们下载两个文件，一个是SolidWorks软件安装包，一个是注册软件（就是破解软件）。</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487657632518.png" alt="Alt text" /></p>

<blockquote><p>这次下载的是BT文件，你可以使用迅雷软件下载。</p></blockquote>

<p>下载已经下载好了。</p>

<hr />

<h2>安装</h2>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487672927926.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487672944505.png" alt="Alt text" /></p>

<p>把电脑的网给断了：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673065696.png" alt="Alt text" /></p>

<p>选择 <strong>单机安装(此计算机上)</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673084027.png" alt="Alt text" /></p>

<p>接下来，添加序列号：</p>

<p>附序列号:
SolidWorks Serial:
0000 0000 0000 3486 Q5HF FG98  或者 0001 0001 0736 0361 JK3Q HDJ3
其他产品的序列号：
SolidWorks Simulation
9000 0000 0001 8043 TB9T SGD9
SolidWorks Motion
9000 0000 0002 7942 9KW4 9FBC
Flow Simulation
9000 0000 0003 3107 V8F3 PG44
SW Composer
9000 0000 0021 4754 DCB4 HC3J
SW ComposerPlayer
9000 0000 0022 1655 536J H9KH
SW Electrical 2D
9000 0000 0000 1616 MDZ8 R8J2
注意，输入序列号以后，最好是先断网，以跳过远程验证。</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673742525.png" alt="Alt text" /></p>

<p>出现了下面的没有网络的提示。我们直接点击 <strong>取消</strong> 即可：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673760700.png" alt="Alt text" /></p>

<hr />

<p>出现下面的截图，我们需要一个一个的对其进行配置。</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673824152.png" alt="Alt text" /></p>

<hr />

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673875179.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673976757.png" alt="Alt text" /></p>

<hr />

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673985555.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673956375.png" alt="Alt text" /></p>

<hr />

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487673997451.png" alt="Alt text" /></p>

<p>我选择安装到 <strong>C盘</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674029993.png" alt="Alt text" /></p>

<hr />

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674043836.png" alt="Alt text" /></p>

<p>因为我之前安装了SolidWorks 2011软件，然后卸载了它，所以我的电脑里面还是有<strong>Toolbox</strong>的，所以，我现在现在的单选项：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674135734.png" alt="Alt text" /></p>

<hr />

<p>点击 <strong>现在安装</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674221217.png" alt="Alt text" /></p>

<p>出现下面的提示框。我们直接选择：<strong>是</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674278636.png" alt="Alt text" /></p>

<p>开始安装：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487674308885.png" alt="Alt text" /></p>

<p>大约10分钟的时间，终于安装完成了：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675356758.png" alt="Alt text" /></p>

<hr />

<h2>破解</h2>

<p>双击启动<strong>SW2010-2013.Activator.SSQ.exe</strong>注册机：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675574181.png" alt="Alt text" /></p>

<p>出现下面的窗口，我们直接点击 ：<strong>Install>></strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675667301.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675699578.png" alt="Alt text" /></p>

<p>弹出下面的提示窗口。我们直接点击 <strong>是</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675753711.png" alt="Alt text" /></p>

<p>弹出下面的提示窗口，直接点击 <strong>是</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675806253.png" alt="Alt text" /></p>

<p>点击 <strong>是</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675836310.png" alt="Alt text" /></p>

<p>点击 <strong>是</strong></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675847461.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675853548.png" alt="Alt text" /></p>

<p>弹出下面提示窗口，点击 <strong>是</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675882743.png" alt="Alt text" /></p>

<p>点击 <strong>Finish</strong> 按钮</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487675913161.png" alt="Alt text" /></p>

<hr />

<p>现在就已经破解完了。</p>

<hr />

<h2>启动 SolidWorks 2012 软件</h2>

<p><a href="http://www.mfcad.com/solidworks/anzhuang/23651.html">http://www.mfcad.com/solidworks/anzhuang/23651.html</a></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676223696.png" alt="Alt text" /></p>

<p>弹出下面的窗口，选择<strong>是</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676164014.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676174739.png" alt="Alt text" /></p>

<p>成功：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676230688.png" alt="Alt text" /></p>

<hr />

<p>因为，我之前没有已经安装过<strong>sw_urdf_exporter</strong>插件。并且我没有卸载：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676374447.png" alt="Alt text" /></p>

<p>现在，我们在SolidWorks 2012 软件 中看看 这个插件还在不在：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676411647.png" alt="Alt text" /></p>

<p>还在：</p>

<p><img src="/images/2017-2-21-SolidWorks-2012-download-install-cracked/1487676470385.png" alt="Alt text" /></p>

<h2>搞定</h2>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/SolidWorks-How-to-make-Assemblies/">SolidWorks 如何制作装配体</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T17:25:20+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>5:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h2>自底向上的装配体设计</h2>

<p>我们以一个例子来学习如何制作装配体。</p>

<p><strong> 装配的概念.zip </strong> ： 链接：<a href="http://pan.baidu.com/s/1skBX41v">http://pan.baidu.com/s/1skBX41v</a> 密码：kff7</p>

<p>这里有包含一个机器人的所有零件的压缩包，这里面都是单独的零件。</p>

<p>接下来，我们要做的事情就是将这些单独的零件制作成一个装配体。</p>

<hr />

<p>启动SolidWorks软件，然后先新建一个装配体：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487658790557.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487658814883.png" alt="Alt text" /></p>

<p>点击 <strong>浏览</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487658863593.png" alt="Alt text" /></p>

<p>我们先选择其中的<code>RectBase.SLDPRT</code>零件。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487659234073.png" alt="Alt text" /></p>

<p>直接点击 <strong>确定</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487659308431.png" alt="Alt text" /></p>

<p>这个时候，鼠标是和零件绑定在一起的，你鼠标移动到哪个位置，零件就到哪个位置。当你鼠标一点击，那么零件就会固定在这个位置上了。这是不行的。（这个时候是关键了）如果你鼠标随便的一点击，零件固定在一个位置，你不知道它被放在了什么位置。你根本就不知道。</p>

<p>正确的做法：</p>

<p>装配体里面有一个默认的原点，就是<code>(0, 0)</code>点，同时零件本身也有一个零点。我们现在需要做的事情是：将这个零件的原点与这个装配体的原点重合。如何重合，很简单：可视化窗口里面不需要点击鼠标，将鼠标移动到设计树这边，我只需要点击 上面对号（就是 <strong>确定</strong>的意思）。软件会自动帮我们将第一个零件固定。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487660511203.png" alt="Alt text" /></p>

<hr />

<p>这样，我们就成功的在装配体中插入了第一个零件。（插入第一个零件的要点就是：必须要将零件的原点与装配件的原点重合。）</p>

<hr />

<p>接着，我们插入第二个零件。还是一样：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487664083112.png" alt="Alt text" /></p>

<p>点击 <strong>浏览</strong>：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487664127950.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487664146709.png" alt="Alt text" /></p>

<p>对于第二个和第三个零件，我们就可以随便点了。我们只需要在这个可视化界面里面随便点一下。</p>

<p>和插入第二个零件一样的方法，将第三个零件插入到装配件里面。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487664299248.png" alt="Alt text" /></p>

<hr />

<p>好的，零件都放进来了，现在我们就要开始装配了。</p>

<h2>随便说一下，在装配体中，鼠标的作用</h2>

<p>当鼠标选中了一个零件，按住鼠标左键，就是移动这个零件。鼠标的滚轮还是缩放的功能。鼠标中间按住不松口，就是整个视角上的旋转（看不同方式上的视图）。鼠标右键还是一样是选择菜单。如果是使用鼠标右键选中这个零件后，然后鼠标右键按住不动，那么就是真正的对单个零件的旋转。</p>

<p>这就是装配体中，对鼠标的基本操作。现在熟悉了鼠标，现在我们就来开始做装配。</p>

<hr />

<p>一个零件在空间中有六个自由度，其中三个是平移，三个是旋转。我们要做的事情就是限制这些自由度，自由度限定死了，那么它就在空间中完全固定下来了，就不会随便乱动了。</p>

<p>如果你留一个自由度在那，那么它就是一个会旋转的装配体。所以，简单的说：做装配体就是限制零件在空间中的自由度。（所以做装配体是很简单的。）</p>

<hr />

<p>现在，我们就来限制这些零件的自由度。</p>

<p>限制零件的自由度，其实就是做<strong>配合</strong>。</p>

<p>我们现在就做第一个导入的零件和第三个导入的零件进行<strong>配合</strong>。</p>

<p>先点击 <strong>配合</strong> 工具 ：</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487664893082.png" alt="Alt text" /></p>

<p>分部选择两个零件的需要重合的面。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487666994345.png" alt="Alt text" /></p>

<p>配合好了，就可以点击<strong>确定</strong>了。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667075053.png" alt="Alt text" /></p>

<p>配合一般都是进行连续配合。所以，你配合了一次，是不会退出配合命令的，我们还会继续进行接下来的几次配合。</p>

<p>接下来就是使用同样的方法，进行配合了。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667253911.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667371108.png" alt="Alt text" /></p>

<p>这样，我们就将第一个零件和第二个零件完全的配合了，它们现在已经被完全的定义了。现在点击 <strong>确定</strong> 图标来退出<strong>配合</strong>操作。</p>

<hr />

<p>现在使用同样的道理，现在来装配第二个零部件。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667808835.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667837627.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487667899899.png" alt="Alt text" /></p>

<hr />

<p>现在，三个零件都装配好了。现在我们就可以点击 <strong>确定</strong> 按钮来退出<strong>配合</strong>操作。</p>

<hr />

<p>在装配体里面，千万不要选择镜像。镜像会出现一个什么样的效果：镜像会产生一个新的零部件。这跟我们在零部件的状态下生成镜像是一样的。</p>

<p>那么我现在要做装配件的另外一面，我要怎么做：就是复制这个零件。</p>

<h2>如何复制零件</h2>

<p>按住 <strong>Ctrl </strong>键，然后鼠标左键不要松开，推动这跟零件，这样就复制出来了。复制完之后，松开 <strong>Ctrl</strong> 键完成复制。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668280693.png" alt="Alt text" /></p>

<p>然后，我们在使用上面同样的操作，再对复制出来的零部件进行同样操作，将其装配到装配体上。</p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668500372.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668586382.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668698857.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668724875.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668773121.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668802776.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-SolidWorks-How-to-make-Assemblies/1487668840052.png" alt="Alt text" /></p>

<hr />

<h2>搞定</h2>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/3D-printer-Best-to-run-offline/">在3D打印的时候，不要给电脑拔出其他的USB设备</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T15:38:25+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>3:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h2>今天遇到的事情</h2>

<p>今天，我将需要打印的文件考到了3D打印机的SD卡里面，3D打印机还通过USB线连接着电脑的USB口。我这个时候将一个读卡器插到了电脑上，这个时候一件悲哀的事情发生了：已经打印了一半的3D打印机不打印了（停机了）。</p>

<p>我现在终于知道了为什么之前会有莫名其妙的打印停止。</p>

<h2>解决办法和经验</h2>

<p>我得到的经验：在3D打印的时候，不要将3D打印机的USB线与电脑连接。让3D打印机离线脱机运行。这样就不会受到电脑端的影响。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/solve-bash-catin_make-command-not-found/">解决 -bash Catin_make Command Not Found 问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T12:26:17+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>12:26 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<ul>
<li>当前使用的ROS 版本：Groovy</li>
</ul>


<hr />

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ubuntu@ubuntu:~/catkin_ws$ catin_make
</span><span class='line'>-bash: catin_make: command not found</span></code></pre></td></tr></table></div></figure>


<h2>问题出现的原因</h2>

<p>参考网站：<a href="http://answers.ros.org/question/212492/catkin_make-command-not-found/">http://answers.ros.org/question/212492/catkin_make-command-not-found/</a></p>

<p>先来查看当前ROS的环境变量：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat ~/.bashrc</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/2017-2-21-solve-bash-catin_make-command-not-found/1482563988992.png" alt="Alt text" /></p>

<p>我们发现里面已经有<code>source /opt/ros/indigo/setup.bash</code>这行代码了。（如果没有一定要添加上。）</p>

<p>为什么还是出现问题呢。</p>

<hr />

<p>后来我才发现，出现错误的原因：</p>

<p>是因为我输错<code>catin_make</code></p>

<p>正确的命令是：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>catkin_make</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/">ROS Learning-033 （提高篇-011 URDF）如何使用SolidWorks软件导出URDF机器人模型文件 — 00 给SolidWorks软件安装 Sw_urdf_exporter插件</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T12:25:03+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>12:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>ROS 提高篇 之 <strong>使用SolidWorks软件导出URDF机器人模型文件</strong> &mdash; 00 给SolidWorks软件安装 <strong>sw_urdf_exporter</strong>插件</h1>

<hr />

<ul>
<li>我使用的虚拟机软件：<strong>VMware Workstation 11</strong></li>
<li>使用的<strong>Ubuntu</strong>系统：<strong>Ubuntu 14.04.4 LTS</strong></li>
<li><strong>ROS</strong> 版本：<strong>ROS Indigo</strong></li>
<li>我使用的SolidWorks软件的版本： <strong>SolidWorks 2011</strong></li>
<li>安装SolidWorks软件的电脑系统：Windows 10系统</li>
</ul>


<h2>前提条件：你需要先在你的电脑里面安装SolidWorks软件。SolidWorks软件的下载安装和破解的图文教程，你可以参考这篇博文：<a href="http://www.aobosir.com/blog/2017/02/19/download-install-crack-graphic-tutorial/">Solidworks 2011软件下载，安装和破解图文教程</a></h2>

<hr />

<p><strong>注意：</strong>
1 . <strong>ROS</strong> 提高篇这个专栏的教学有门槛。
2 . 如果你没有学习前面的教程，请想学习前面的 <strong>beginner_Tutorials</strong> 和 <strong>learning_tf</strong> 的<strong>ROS</strong> 相关教程。
3 . 你还需要会使用SolidWorks软件。<a href="http://www.aobosir.com/tags/solidworks/">这里</a>有相关的博文。</p>

<hr />

<h2><strong>sw_urdf_exporter</strong></h2>

<p>参考网站：<a href="http://wiki.ros.org/sw_urdf_exporter">SolidWorks to URDF Exporter</a></p>

<p><strong>sw_urdf_exporter</strong>它使用一个SolidWorks软件的一个插件，这个插件是ROS团队设计的。<strong>sw_urdf_exporter</strong>这个插件的官方介绍网站在<a href="http://wiki.ros.org/sw_urdf_exporter">这里</a>。</p>

<p>下面来简单的介绍一下这个插件：这个插件的功能是将SolidWorks里面的模型导出成URDF格式的文件，也就是说，我们其实可以管这个插件叫做：<a href="http://www.aobosir.com/blog/2017/02/19/download-install-crack-graphic-tutorial/">SolidWorks</a>里面的URDF文件的导出器。这个导出器将会创建一个类似ROS的包，其中包的路径里面包含模型的网络（Mesh）、纹理（Texture）和机器人模型文件（URDF）文件。对于当个的SolidWorks模型文件，导出程序将在URDF文件里面创建单个链接；对于SolidWorks的装配件，导出程序江湖构建链接，然后在基于SolidWorks组件层次创建结构树，导出程序中的输出器可以自动确定正确的关节类型、关节变换和轴（joint type, joint transforms and axes）。</p>

<h2>下载 <strong>sw_urdf_exporter</strong></h2>

<p>到<a href="http://wiki.ros.org/sw_urdf_exporter">这个网站</a>里面，直接点击下面这个按钮：</p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487623172541.png" alt="Alt text" /></p>

<p>当弹出一个网页，点击里面的 <strong>View raw</strong>，就可以下载了：</p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487623229944.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487623272693.png" alt="Alt text" /></p>

<hr />

<p>下载后，双击运行。（我现在先不急着运行，我们先说说使用这个软件的注意事项，然后在手把手的给你介绍如何给<a href="http://www.aobosir.com/blog/2017/02/19/download-install-crack-graphic-tutorial/">SolidWorks</a>软件安装这个插件。）</p>

<hr />

<h2>对于这个插件，使用时，需要注意几点</h2>

<ul>
<li>这个插件在SolidWorks 2012 版本里面可以正常的使用，但是对于更高的版本不知道兼容性如何。</li>
<li>如果你想要获取SolidWorks ROS这个插件最新的通知，你可以在这个网页里面获取到：<a href="https://groups.google.com/forum/?fromgroups#!forum/ros-sig-solidworks">ROS SolidWorks SIG</a></li>
<li>这个插件不依赖于ROS系统，也就是说，我们可以在我们的安装了<a href="http://www.aobosir.com/blog/2017/02/19/download-install-crack-graphic-tutorial/">SolidWorks</a>软件的Windows 10电脑上，将SolidWorks里面的模型文件通过这个插件将其导出成<a href="http://wiki.ros.org/urdf">URDF</a>文件。然后再给别的Ubuntu系统使用。（可以将任何SolidWorks模型文件导出成<a href="http://wiki.ros.org/urdf">URDF</a>文件。）</li>
<li>这个插件目前只能运行在64位的Windows系统上，32位的系统不能运行。</li>
</ul>


<h2>安装</h2>

<p>安装需要注意的事情：</p>

<ul>
<li><p>你不能将其安装到标有<code>SW2URDF</code>的目录。否则运行程序会抛出未处理的异常错误。</p></li>
<li><p>同时，因为这个插件是使用<strong>C#</strong>编写的，所以，如果你的电脑里面安装<code>.NET Framework V4</code>，或者没有升级到<code>.NET Framework V4</code>以上，你需要先安装<a href="https://www.microsoft.com/zh-cn/download/details.aspx?id=17718">这个</a>。</p></li>
</ul>


<p>上面的两个注意事项的知道了后，我们现在就来安装。双击刚刚下载的安装包。</p>

<blockquote><p>其实你也可以直接下载源代码，然后在使用Visual Studio 软件来手动编译生成可执行文件。</p>

<p><strong>sw_urdf_exporter</strong>项目的源代码在这里下载：</p>

<p>下载需要使用 <code>hg</code> 或者 <code>ssh</code> 命令来下载，<code>git</code>工具时不能下载<strong>Bitbucket</strong>这个网站里面的源代码的，又因为我的Windows系统电脑里面只安装了git工具，所以下面我介绍的下载方法是：直接下载源代码。</p>

<p> 点击 <strong>Download</strong> 标签：</p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487626201507.png" alt="Alt text" /></p>

<p>然后直接点击 <strong>Download repository</strong> 就下载了。</p>

<p> <img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487626279426.png" alt="Alt text" /></p>

<p> 下载好了，解压，里面有<strong>sw_urdf_exporter</strong>项目的源代码，以及一些示例模型（SolidWorks模型）。</p></blockquote>

<p>（我们这里是使用安装包进行安装。）双击安装包，它会自动的识别到你电脑里面当前安装了SolidWorks软件的路径。我们直接 <strong>Next</strong>。</p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487628670908.png" alt="Alt text" /></p>

<p>点击 <strong>Intall</strong></p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487628830450.png" alt="Alt text" /></p>

<p>秒速完成。点击 <strong>Finish</strong></p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487628845674.png" alt="Alt text" /></p>

<hr />

<p>好的，现在已经安装完成了。现在启动SolidWorks软件：</p>

<p>选择： <strong>插件&hellip;</strong></p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487629154657.png" alt="Alt text" /></p>

<hr />

<p>你会在 <strong>其他插件</strong> 里面看到一项 <code>SW2URDF</code>，正确情况是被勾选的，如果没有被勾选，请勾选。</p>

<p><img src="/images/2017-2-21-ROS-sw_urdf_exporter-download-install-and-add-plug-in-solidworks/1487629315046.png" alt="Alt text" /></p>

<h2>搞定</h2>

<p>现在就已经想这个插件安装成功了。下面我们就来测试一下这个插件如何使用。</p>

<hr />

<h2>使用这个插件</h2>

<p>对于这个插件，ROS官方给出了专门的教程，在<a href="http://wiki.ros.org/sw_urdf_exporter/Tutorials">这里</a>。</p>

<p>接下来，下一个博文，我们就来介绍，这个插件如何使用。</p>

<ul>
<li><a href="http://wiki.ros.org/sw_urdf_exporter/Tutorials/Export%20a%20Part">将SolidWorks零件导出为URDF文件</a></li>
<li><a href="http://wiki.ros.org/sw_urdf_exporter/Tutorials/Export%20an%20Assembly">将SolidWorks装配件导出为URDF文件</a></li>
<li><a href="http://wiki.ros.org/sw_urdf_exporter/Tutorials/Organizing%20SolidWorks%20Assembly%20for%20URDF%20Exporter">简化大型装配件的SolidWorks和URDF导出程序工作流程</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/21/python-Evernote-Auto-converted-to-Octopress-local-site-blog/">马克飞象笔记自动转换为Octopress本地站点博客 — Python</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T02:16:37+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>2:16 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>GUI-Evernote-Auto-converted-to-Octopress-local-site-blog-and-CSDN-blog</h2>

<p>[TOC]</p>

<hr />

<p><strong>开发环境：</strong></p>

<ul>
<li>Python 版本： Python3.5.0</li>
<li>PyCharm 版本：PyCharm 2016.1.4</li>
<li>Windows 10 64位 系统</li>
</ul>


<hr />

<h2>程序设计流程</h2>

<ul>
<li>用一个变量存放 <strong>Octopress</strong> 博客的文件名。比如：<code>folder_name = '2016-11-27-demo'</code></li>
<li>在与<strong>马克飞象笔记文件夹</strong>（<code>evernote_folder_name</code>）同一路径（<code>root_directory</code>）下，创建一个文件夹，取名为<code>folder_name</code>变量</li>
<li>将<strong>马克飞象笔记文件夹</strong>（<code>evernote_folder_name</code>）里面的所有图片全部复制到刚刚新创建的<code>folder_name</code> 文件夹（路径）里面。</li>
<li>将<strong>马克飞象笔记文件夹</strong>（<code>evernote_folder_name</code>）里面的笔记文件（<code>.md</code>文件），复制一份放到<code>root_directory</code>路径下，并将其名字重命名为：<code>folder_name</code>变量，并将其后缀修改为：<code>.markdown</code></li>
<li>读取<code>folder_name</code>.markdown 文件，将里面的图片链接替换为<strong>Octopress</strong>本地链接的形式</li>
<li>删除笔记里面的 第一个标题（<code># xxx</code>） 和 笔记本（<code>@(xxx)</code>）（方法：以后记马克飞象笔记，第1行是标题，第3行是 归宿笔记本。所以，我们只需要简单的将前3行删除就可。）</li>
<li>添加<strong>Octopress</strong>博客前缀</li>
<li>将最终得到的Octopress博文文件（.markdown后缀文件）保存为UTF-8无BOM编码文件</li>
<li>之前创建文件夹<code>folder</code>，现在加一个条件：如果文件夹已经存在，则不用创建</li>
<li>自动检测这个博客是：仅仅一个文件（<code>.md</code>），还是一个文件夹（就是检测这个博文里面有没有图片）</li>
<li>给定马克飞象笔记文件（<code>.md</code>文件）路径，自动获取<code>root_directory</code>路径</li>
<li>自动检测这个博客是：仅仅一个文件（<code>.md</code>），还是一个文件夹 和 给定马克飞象笔记文件（<code>.md</code>文件）路径，自动获取<code>root_directory</code>路径 和 <code>evernote_folder_name</code>名字 的代码如下：</li>
<li>如果马克飞象笔记只是一个文件，我们就不进行创建文件夹、复制图片和文件内图片链接的修改的操作</li>
<li>将整个<code>evernoteToOctopressBlog.py</code>封装成一个类:<code>EvernoteToOctopressBlog</code></li>
<li>将<code>evernoteToOctopressBlog.py</code>文件写成一个工具（命令行工具），可以向里面传入命令行参数</li>
<li>基本完成了</li>
</ul>


<p>这样，程序的功能就都完成了。</p>

<h2>Python 创建文件夹</h2>

<p>参考网站：</p>

<ul>
<li><a href="http://www.qttc.net/201209207.html">Python创建目录文件夹</a></li>
<li><a href="http://www.cnblogs.com/zhoujie/archive/2013/04/10/python7.html">python学习笔记（七）——文件和目录操作</a></li>
</ul>


<hr />

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -*- coding: utf-8 -*-</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'><span class="n">folder_name</span> <span class="o">=</span> <span class="s">&#39;2016-11-27-demo&#39;</span>
</span><span class='line'><span class="n">root_directory</span> <span class="o">=</span> <span class="s">&#39;D:/WorkSpace/test_ws/&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>注意：如果想要创建的文件夹是已经存在的，那么执行上面的程序会出现下面的错误：<code>FileExistsError: [WinError 183] 当文件已存在时，无法创建该文件。</code></p></blockquote>

<p>所以这段代码容易出现错误：如果文件夹已存在或者文件夹名中有不允许使用的字符时，<code>os.mkdir()</code>函数都会执行失败。所以，这段代码需要进行异常处理：</p>

<p>参考网站：<a href="http://www.runoob.com/python/python-exceptions.html">Python 异常处理</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">try</span><span class="p">:</span>
</span><span class='line'>    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'><span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样，在运行程序的时候就不会再出现错误了。但是当你给定的文件名中有非法字符时，创建文件夹是不会成功的，但是程序不会报错。</p>

<hr />

<h2>Python 复制图片</h2>

<p>参考网站：</p>

<ul>
<li><a href="https://www.zhukun.net/archives/6326">python中文件的复制</a></li>
<li><a href="http://www.jb51.net/article/17921.htm">dos 文件复制 copy命令</a></li>
</ul>


<p>将<strong>马克飞象笔记文件夹</strong>里面的所有图片全部复制到刚刚新创建的<code>folder_name</code> 文件夹（路径）里面。</p>

<blockquote><p>python自带的第三方库：<strong>shutil</strong> 可以实现文件的复制操作，但是它只能一次复制一个文件。所以我们不使用这个<strong>shutil</strong>模块来做复制文件的操作。</p></blockquote>

<p>我们使用python调用Windows系统DOS命令行里面的<strong>copy</strong>工具来继续文件的复制。</p>

<p>下面的代码可以将<strong>马克飞象笔记文件夹</strong>里面的所有图片复制到<code>folder_name</code>文件夹里面：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -*- coding: utf-8 -*-</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">folder_name</span> <span class="o">=</span> <span class="s">&#39;2016-11-27-demo&#39;</span>
</span><span class='line'><span class="n">evernote_folder_name</span> <span class="o">=</span> <span class="s">&#39;Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六&#39;</span>
</span><span class='line'><span class="n">root_directory</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">try</span><span class="p">:</span>
</span><span class='line'>    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'><span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="s">&#39;File error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</span><span class='line'>    <span class="k">pass</span>
</span><span class='line'>
</span><span class='line'><span class="n">copy_img_command</span> <span class="o">=</span> <span class="s">&#39;copy &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">evernote_folder_name</span> <span class="o">+</span> <span class="s">r&#39;\*.png&quot; &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="s">r&#39;\&quot;&#39;</span>
</span><span class='line'><span class="c"># print(copy_img_command)</span>
</span><span class='line'><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">copy_img_command</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>其实，代码中的 <code>os.system(copy_img_command)</code> 这段代码就是等价于：在 <strong>DOS</strong> 窗口执行：<code>copy "D:\WorkSpace\test_ws\\Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六\*.png" "D:\WorkSpace\test_ws\\2016-11-27-demo\"</code>  这个指令。</p>

<hr />

<h2>经验：我发现了两件事：</h2>

<p>1 . 在<strong>DOS</strong> 里面，执行下面的命令，有的是对的，有的是错的：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Succesfull</span>
</span><span class='line'><span class="n">copy</span> <span class="s">&quot;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws\Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六\*.png&quot;</span> <span class="s">&quot;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws</span><span class="se">\201</span><span class="s">6-11-27-demo</span><span class="se">\&quot;</span>
</span><span class='line'><span class="c"># Succesfull</span>
</span><span class='line'><span class="n">copy</span> <span class="s">&quot;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws</span><span class="se">\\</span><span class="s">Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六\*.png&quot;</span> <span class="s">&quot;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws</span><span class="se">\\</span><span class="s">2016-11-27-demo</span><span class="se">\&quot;</span>
</span><span class='line'><span class="c"># error</span>
</span><span class='line'><span class="n">copy</span> <span class="s">&quot;D:/WorkSpace/test_ws/Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六/*.png&quot;</span> <span class="s">&quot;D:/WorkSpace/test_ws/2016-11-27-demo/&quot;</span>
</span><span class='line'><span class="c"># error</span>
</span><span class='line'><span class="n">copy</span> <span class="s">&quot;D://WorkSpace//test_ws//Python3 大型网络爬虫实战 003 — scrapy 大型静态图片网站爬虫项目实战 — 实战：爬取 169美女图片网 高清图片 — Over — 2016年11月26日 星期六//*.png&quot;</span> <span class="s">&quot;D://WorkSpace//test_ws//2016-11-27-demo//&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>总结：</p>

<ol>
<li><code>\</code>是一个特殊字符，它不能再字符串中正常的显示，如果必须显示，就这样写：<code>\\</code></li>
<li><strong>DOS</strong> 命令里面指定文件路径时，只能使用<code>\</code>，不能使用<code>/</code> 和 <code>//</code> ，使用这两个都是错的，都会导致 <strong>DOS</strong>找不到指定的文件路径</li>
<li>在<strong>DOS</strong> 命令里面，指定文件路径的 <code>\</code> ，你写成 <code>\\</code> 或者 <code>\\\</code> 或者 <code>\\\\\\</code> &hellip; 对是可以正常执行的，不会出现错误。</li>
</ol>


<hr />

<p>2 . 同时，我发现：</p>

<p>python 的字符串前面加上<code>r</code>，说明这个字符串是<code>raw string</code>，即无需转义的字符串，意思就是这个字符串里面有什么就是什么。</p>

<p>但是我发现了python的一个bug：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># error</span>
</span><span class='line'><span class="nb">str</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws</span><span class="se">\&#39;</span>
</span><span class='line'><span class="c"># 经验：就算是在字符串前面加上了 r ，字符串最后一个字符也不能是 /</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># succes</span>
</span><span class='line'><span class="nb">str</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</span><span class='line'><span class="c"># 输出：D:\WorkSpace\test_ws\\</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># succes</span>
</span><span class='line'><span class="nb">str</span> <span class="o">=</span> <span class="s">&#39;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</span><span class='line'><span class="c"># 输出：D:\WorkSpace   est_ws\</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>Python 复制文件，并对副本文件重命名</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">copy_file_command</span> <span class="o">=</span> <span class="s">&#39;copy &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">evernote_folder_name</span> <span class="o">+</span> <span class="s">r&#39;</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">evernote_folder_name</span> <span class="o">+</span> <span class="s">&#39;.md&quot; &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="s">&#39;.markdown&quot;&#39;</span>
</span><span class='line'><span class="c"># print(copy_file_command)</span>
</span><span class='line'><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">copy_file_command</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>打开马克笔记的拷贝文件（.markdown后缀）</h2>

<p>参考网站：</p>

<ul>
<li><a href="https://blog.linuxeye.com/365.html">Python文件处理 open()</a></li>
<li><a href="https://my.oschina.net/kenblog/blog/599737">Python3 读取文件出错： &lsquo;gbk&rsquo; codec can&rsquo;t decode byte 0x8</a></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">evernote_file_path</span> <span class="o">=</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="s">&#39;.markdown&#39;</span>
</span><span class='line'><span class="n">evernote_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">evernote_file_path</span><span class="p">,</span> <span class="s">&#39;rt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">evernote_data</span> <span class="o">=</span> <span class="n">evernote_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'><span class="n">evernote_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">evernote_data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>替换图片的链接</h2>

<p>使用正则表达式先提取出原来的图片链接。再将这个链接修改为<strong>Octopress</strong>本地形式的链接。最后进行替换。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">image_local_path</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;!\[Alt text\]\((.*?)\)&#39;</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span><span class='line'><span class="c"># print(image_local_path)</span>
</span><span class='line'><span class="n">image_relative_path</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_local_path</span><span class="p">)):</span>
</span><span class='line'>    <span class="n">image_relative_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/images/&#39;</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>    <span class="c"># print(image_relative_path[i])</span>
</span><span class='line'>    <span class="n">evernote_data</span> <span class="o">=</span> <span class="n">evernote_data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">image_relative_path</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">evernote_data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>删除笔记里面的 第一个标题（<code># xxx</code>） 和 笔记本（<code>@(xxx)</code>）</h2>

<p>我是这样设计的，我们今后写马克笔记定一个规则：</p>

<p>以后记马克飞象笔记，第1行是标题，第3行是 归宿笔记本。所以，我们只需要简单的将前3行删除就可。</p>

<p>参考网站：</p>

<ul>
<li><a href="http://www.cnblogs.com/huangcong/archive/2011/08/29/2158268.html">Python 字符串操作（string替换、删除、截取、复制、连接、比较、查找、包含、大小写转换、分割等）</a></li>
<li><a href="http://stackoverflow.com/questions/13227970/how-to-effectively-remove-a-line-in-the-middle-of-a-large-file">How to effectively remove a line in the middle of a large file?</a></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">evernote_data_list</span> <span class="o">=</span> <span class="n">evernote_data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span class='line'><span class="n">octopress_file_path</span> <span class="o">=</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="s">&#39;.markdown&#39;</span>  <span class="c"># r&#39;F:\octopress\source\_posts\\&#39; + folder_name + &#39;.markdown&#39;</span>
</span><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">evernote_data_list</span><span class="p">)):</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">evernote_data_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">octopress_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">octopress_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span class='line'><span class="n">octopress_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行：</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480294281304.png" alt="Alt text" /></p>

<hr />

<h2>添加<strong>Octopress</strong>博客前缀</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">addOctopressBlogPrefix</span><span class="p">(</span><span class="n">octopress_file</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;---&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;layout: post&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;title: &quot;&#39;</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;date: &#39;</span> <span class="o">+</span> <span class="n">data</span> <span class="o">+</span> <span class="s">&#39; +0800&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;comments: true&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;sharing: true&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;categories: [&#39;</span> <span class="o">+</span> <span class="n">categories</span> <span class="o">+</span> <span class="s">&#39;]&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;tags: [&#39;</span> <span class="o">+</span> <span class="n">tags</span> <span class="o">+</span> <span class="s">&#39;]&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">octopress_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;---&#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">octopress_file</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用这个<code>addOctopressBlogPrefix()</code>函数：</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480293276868.png" alt="Alt text" /></p>

<p>这个系统时间是这样得到的：（<a href="http://www.runoob.com/python/python-date-time.html">参考网站</a>）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="c"># 格式化成2016-03-20 11:45:39形式</span>
</span><span class='line'><span class="n">time_data</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y-%m-</span><span class="si">%d</span><span class="s"> %H:%M:%S&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
</span><span class='line'><span class="c"># print(time_data)</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>将最终得到的Octopress博文文件（.markdown后缀文件）保存为UTF-8无BOM编码文件</h2>

<p>如果现在将这个文件和图片转移到Octopress站点路径里面，然后执行<code>rake generate</code>命令会出现下面这个错误：</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480365808617.png" alt="Alt text" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">Error</span> <span class="n">reading</span> <span class="nb">file</span> <span class="n">F</span><span class="p">:</span><span class="o">/</span><span class="n">octopress</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">_posts</span><span class="o">/</span><span class="n">xxxx</span><span class="o">.</span><span class="n">markdown</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">byte</span> <span class="n">sequence</span> <span class="ow">in</span> <span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</span><span class='line'>  <span class="n">Liquid</span> <span class="ne">Exception</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">byte</span> <span class="n">sequence</span> <span class="ow">in</span> <span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="ow">in</span> <span class="n">_posts</span><span class="o">/</span><span class="n">xxxx</span><span class="o">.</span><span class="n">markdown</span><span class="o">/</span><span class="c">#excerpt</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个错误时说：这个文件<code>xxxx.markdown</code>它的编码不是标准的UTF-8无BOM编码方式编辑的文件。</p>

<p>所以，为了解决这个问题，我们需要将输出的<strong>Octopress</strong>博文文件（<code>.markdown</code>后缀文件）在保存的时候将其转换为以Utf-8无BOM编码方式编码的文件。</p>

<p>其实很简单，我们只需要将下面这行代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>修改为：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样<code>octopress_file</code>文件就是以Utf-8无BOM编码方式编码的文件。</p>

<blockquote><p>我们也看到了，其实不是将<code>octopress_file</code>保存为以Utf-8无BOM编码方式编码的文件，而是创建这个一个以Utf-8无BOM编码方式编码的文件 <code>octopress_file</code>。</p></blockquote>

<p>虽然已经成功的将最终得到的Octopress博文文件（.markdown后缀文件）保存为UTF-8无BOM编码文件。但是在执行 <code>print(octopress_file.read())</code> 这句代码的时候，出现了<code>UnicodeDecodeError</code> 错误，如下。</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480367555470.png" alt="Alt text" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">octopress_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span class='line'><span class="ne">UnicodeDecodeError</span><span class="p">:</span> <span class="s">&#39;gbk&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="s">&#39;t decode byte 0x8b in position 75: illegal multibyte sequence</span>
</span></code></pre></td></tr></table></div></figure>


<p>哦，这个问题也非常容易解决，可以说现在不在是一个难问题了。</p>

<p>解决办法：将<code>print(octopress_file.read())</code>这行代码的上一行：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>修改为：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">octopress_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">octopress_file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>解释：因为 <code>octopress_file</code> 已经是UTF-8无BOM编码的文件了，所以读取它的时候，也要将编码方式设为：<code>UTF-8</code> 才行。</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480369389414.png" alt="Alt text" /></p>

<hr />

<h2>搞定</h2>

<p>最后贴上当前最新的完整代码(v1.0)：<a href="https://github.com/AoboJaing/Evernote_Automatic_format_conversion/tree/v1.0">https://github.com/AoboJaing/Evernote_Automatic_format_conversion/tree/v1.0</a></p>

<p>运行结果：</p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480294160448.png" alt="Alt text" /></p>

<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1480294179617.png" alt="Alt text" /></p>

<hr />

<h2>之前创建文件夹<code>folder</code>，现在加一个条件：如果文件夹已经存在，则不用创建</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># 在root_directory路径里面创建一个名为 folder_name 的文件夹。（如果文件夹已经存在，则不用创建）</span>
</span><span class='line'><span class="k">try</span><span class="p">:</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Create a folder:&#39;</span> <span class="o">+</span> <span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'>        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&#39;The folder &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span> <span class="o">+</span> <span class="s">&#39;&quot; was already exist. Not need to create again.&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="s">&#39;File error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>自动检测这个博客是：仅仅一个文件（<code>.md</code>），还是一个文件夹（就是检测这个博文里面有没有图片）</h2>

<p>参考博客：<a href="http://www.aobosir.com/blog/2016/12/01/python-string-split/">Learning Python 025 字符串分割</a></p>

<p>Demo 程序：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -*- coding: utf-8 -*-</span>
</span><span class='line'>
</span><span class='line'><span class="n">path</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四.md&#39;</span>
</span><span class='line'><span class="n">path2</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四.md&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">l1</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c"># l1 = path2.split(&#39;\\&#39;)</span>
</span><span class='line'><span class="c"># print(l1)</span>
</span><span class='line'><span class="c"># print(l1[-1])</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">l1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="n">l2</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c"># print(l2)</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="n">same</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="n">l2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">same</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行输出：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">Git</span><span class="p">(</span><span class="n">GitHub</span><span class="p">)</span> <span class="mo">002</span> <span class="err">如何在</span><span class="n">GitHub</span> <span class="n">For</span> <span class="n">Windows</span> <span class="err">软件上为代码库创建一个版本标签</span> <span class="err">—</span> <span class="n">Ongoing</span> <span class="err">—</span> <span class="mi">2016</span><span class="err">年</span><span class="mi">12</span><span class="err">月</span><span class="mi">1</span><span class="err">日</span> <span class="err">星期四</span>
</span><span class='line'><span class="n">Git</span><span class="p">(</span><span class="n">GitHub</span><span class="p">)</span> <span class="mo">002</span> <span class="err">如何在</span><span class="n">GitHub</span> <span class="n">For</span> <span class="n">Windows</span> <span class="err">软件上为代码库创建一个版本标签</span> <span class="err">—</span> <span class="n">Ongoing</span> <span class="err">—</span> <span class="mi">2016</span><span class="err">年</span><span class="mi">12</span><span class="err">月</span><span class="mi">1</span><span class="err">日</span> <span class="err">星期四</span>
</span><span class='line'><span class="bp">True</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>给定马克飞象笔记文件（<code>.md</code>文件）路径，自动获取<code>root_directory</code>路径</h2>

<p>Demo 程序：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -!- coding: utf-8 -!-</span>
</span><span class='line'>
</span><span class='line'><span class="n">path</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四.md&#39;</span>
</span><span class='line'><span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">evernote_is_folder</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span>
</span><span class='line'>    <span class="n">a</span><span class="o">=-</span><span class="mi">2</span>
</span><span class='line'>
</span><span class='line'><span class="n">mylist</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mylist</span><span class="p">[:</span><span class="n">a</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>自动检测这个博客是：仅仅一个文件（<code>.md</code>），还是一个文件夹 和 给定马克飞象笔记文件（<code>.md</code>文件）路径，自动获取<code>root_directory</code>路径 和 <code>evernote_folder_name</code>名字 的代码如下：</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># 自动检测这个博客是：仅仅一个文件（`.md`），还是一个文件夹</span>
</span><span class='line'><span class="c"># 给定马克飞象笔记文件（`.md`文件）路径，自动获取`root_directory`路径 和 `evernote_folder_name`名字</span>
</span><span class='line'><span class="n">evernote_file_path</span> <span class="o">=</span> <span class="s">r&#39;D:\WorkSpace\test_ws\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四\Git(GitHub) 002 如何在GitHub For Windows 软件上为代码库创建一个版本标签 — Ongoing — 2016年12月1日 星期四.md&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'><span class="n">l1</span> <span class="o">=</span> <span class="n">evernote_file_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
</span><span class='line'><span class="c"># print(l1[-2])</span>
</span><span class='line'><span class="n">l2</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c"># print(l2[0])</span>
</span><span class='line'><span class="n">evernote_is_folder</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="n">l2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'><span class="n">str_temp</span><span class="o">=</span><span class="s">&#39;文件&#39;</span>
</span><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span>
</span><span class='line'>    <span class="n">a</span><span class="o">=-</span><span class="mi">2</span>
</span><span class='line'>    <span class="n">str_temp</span><span class="o">=</span><span class="s">&#39;文件夹&#39;</span>
</span><span class='line'>    <span class="k">pass</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="s">&#39;当前处理的这个马克飞象笔记是一个&#39;</span> <span class="o">+</span> <span class="n">str_temp</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 马克飞象笔记的文件名</span>
</span><span class='line'><span class="n">evernote_folder_name</span> <span class="o">=</span> <span class="n">l2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="c"># 马克飞象笔记文件夹所在路径</span>
</span><span class='line'><span class="n">root_directory</span> <span class="o">=</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l1</span><span class="p">[:</span><span class="n">a</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">evernote_folder_name</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">root_directory</span><span class="p">)</span>
</span><span class='line'><span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>如果马克飞象笔记只是一个文件，我们就不进行创建文件夹、复制图片和文件内图片链接的修改的操作</h2>

<p>很简单，我们只需要在创建文件夹和复制图片的操作的代码执行前加一个条件。满足条件就执行。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span> <span class="c"># 执行以下代码的前提是：马克飞象笔记是一个文件夹</span>
</span></code></pre></td></tr></table></div></figure>


<p>代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># 在root_directory路径里面创建一个名为 folder_name 的文件夹。（如果文件夹已经存在，则不用创建）</span>
</span><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span> <span class="c"># 执行以下代码的前提是：马克飞象笔记是一个文件夹</span>
</span><span class='line'>    <span class="n">folder_name_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">folder_name_exists</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
</span><span class='line'>            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Create a folder:&#39;</span> <span class="o">+</span> <span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'>            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span><span class="p">)</span>
</span><span class='line'>            <span class="k">pass</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">print</span><span class="p">(</span><span class="s">&#39;The folder &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span><span class="o">+</span><span class="n">folder_name</span> <span class="o">+</span> <span class="s">&#39;&quot; was already exist. Not need to create again.&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&#39;File error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="k">pass</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># 将马克飞象笔记文件夹里面的所有图片全部复制到刚刚新创建的folder_name 文件夹（路径）里面</span>
</span><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span> <span class="c"># 执行以下代码的前提是：马克飞象笔记是一个文件夹</span>
</span><span class='line'>    <span class="n">copy_img_command</span> <span class="o">=</span> <span class="s">&#39;copy &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">evernote_folder_name</span> <span class="o">+</span> <span class="s">r&#39;\*.png&quot; &quot;&#39;</span> <span class="o">+</span> <span class="n">root_directory</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="s">r&#39;\&quot;&#39;</span>
</span><span class='line'>    <span class="c"># print(copy_img_command)</span>
</span><span class='line'>    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">copy_img_command</span><span class="p">)</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># 将里面的图片链接替换为**Octopress**本地链接的形式</span>
</span><span class='line'><span class="k">if</span> <span class="n">evernote_is_folder</span><span class="p">:</span> <span class="c"># 执行以下代码的前提是：马克飞象笔记是一个文件夹</span>
</span><span class='line'>    <span class="n">image_local_path</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;!\[Alt text\]\((.*?)\)&#39;</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span><span class='line'>    <span class="c"># print(image_local_path)</span>
</span><span class='line'>    <span class="n">image_relative_path</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_local_path</span><span class="p">)):</span>
</span><span class='line'>        <span class="n">image_relative_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/images/&#39;</span> <span class="o">+</span> <span class="n">folder_name</span> <span class="o">+</span> <span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>        <span class="c"># print(image_relative_path[i])</span>
</span><span class='line'>        <span class="n">evernote_data</span> <span class="o">=</span> <span class="n">evernote_data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">image_relative_path</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="c"># print(evernote_data)</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>当前完整的代码在这里：<a href="https://github.com/AoboJaing/Evernote_Automatic_format_conversion/tree/v1.1">https://github.com/AoboJaing/Evernote_Automatic_format_conversion/tree/v1.1</a></p>

<hr />

<h2>将整个<code>evernoteToOctopressBlog.py</code>封装成一个类:<code>EvernoteToOctopressBlog</code></h2>

<p>参考网站：<a href="http://www.aobosir.com/blog/2016/12/01/class-programming-object/">Learning Python 023 类编程</a></p>

<p>当前完整的代码在这里（v2.0）：<a href="https://github.com/AoboJaing/Evernote_Automatic_format_conversion/blob/v2.0/script/evernoteToOctopressBlog.py">https://github.com/AoboJaing/Evernote_Automatic_format_conversion/blob/v2.0/script/evernoteToOctopressBlog.py</a></p>

<hr />

<h2>将<code>evernoteToOctopressBlog.py</code>文件写成一个工具（命令行工具），可以向里面传入命令行参数</h2>

<p>参考网站：<a href="http://www.aobosir.com/blog/2016/12/02/python-get-command-line-arguments/">Learning Python 028 获取命令行参数</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">optparse</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>    <span class="c"># 输入信息：folder_name、 evernote_file_path、octopress_title、octopress_categories、octopress_tags</span>
</span><span class='line'>    <span class="n">parser</span> <span class="o">=</span> <span class="n">optparse</span><span class="o">.</span><span class="n">OptionParser</span><span class="p">(</span><span class="s">&#39;usage%prog &#39;</span> <span class="o">+</span>\
</span><span class='line'>            <span class="s">&#39;-f &lt;folder_name&gt; -p &lt;evernote_file_path&gt; -T &lt;octopress_title&gt; -c &lt;octopress_categories&gt; -t &lt;octopress_tags&gt;&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;folder_name&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;string&#39;</span><span class="p">,</span>\
</span><span class='line'>                      <span class="n">help</span><span class="o">=</span><span class="s">&#39;be converted Octopress blog file and images file name&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-p&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;evernote_file_path&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;string&#39;</span><span class="p">,</span> \
</span><span class='line'>                      <span class="n">help</span><span class="o">=</span><span class="s">&#39;evernote file path&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-T&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;octopress_title&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;string&#39;</span><span class="p">,</span> \
</span><span class='line'>                      <span class="n">help</span><span class="o">=</span><span class="s">&#39;be converted Octopress blog</span><span class="se">\&#39;</span><span class="s">s title&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;octopress_categories&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;string&#39;</span><span class="p">,</span> \
</span><span class='line'>                      <span class="n">help</span><span class="o">=</span><span class="s">&#39;be converted Octopress blog</span><span class="se">\&#39;</span><span class="s">s categories&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-t&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;octopress_tags&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;string&#39;</span><span class="p">,</span> \
</span><span class='line'>                      <span class="n">help</span><span class="o">=</span><span class="s">&#39;be converted Octopress blog</span><span class="se">\&#39;</span><span class="s">s tags&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">folder_name</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">evernote_file_path</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="o">|</span> \
</span><span class='line'>            <span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">octopress_title</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">octopress_categories</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="o">|</span> \
</span><span class='line'>            <span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">octopress_tags</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span><span class="p">)</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">folder_name</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">folder_name</span>
</span><span class='line'>        <span class="n">evernote_file_path</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">evernote_file_path</span>
</span><span class='line'>        <span class="n">octopress_title</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">octopress_title</span>
</span><span class='line'>        <span class="n">octopress_categories</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">octopress_categories</span>
</span><span class='line'>        <span class="n">octopress_tags</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">octopress_tags</span>
</span><span class='line'>        <span class="c"># print(folder_name)</span>
</span><span class='line'>        <span class="c"># print(evernote_file_path)</span>
</span><span class='line'>        <span class="c"># print(octopress_title)</span>
</span><span class='line'>        <span class="c"># print(octopress_categories)</span>
</span><span class='line'>        <span class="c"># print(octopress_tags)</span>
</span><span class='line'>        <span class="n">eTo</span> <span class="o">=</span> <span class="n">EvernoteToOctopressBlog</span><span class="p">(</span><span class="n">folder_name</span><span class="p">,</span> <span class="n">evernote_file_path</span><span class="p">,</span> <span class="n">octopress_title</span><span class="p">,</span> <span class="n">octopress_categories</span><span class="p">,</span> <span class="n">octopress_tags</span><span class="p">)</span>
</span><span class='line'>        <span class="n">eTo</span><span class="o">.</span><span class="n">autoProcess</span><span class="p">()</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="k">pass</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">D</span><span class="p">:</span>\<span class="n">WorkSpace</span>\<span class="n">python_ws</span>\<span class="n">Evernote_Automatic_format_conversion</span><span class="o">&gt;</span><span class="n">python</span> <span class="n">script</span>\<span class="n">evernoteToOctopressBlog</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">h</span>
</span><span class='line'><span class="n">Usage</span><span class="p">:</span> <span class="n">usageevernoteToOctopressBlog</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">folder_name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">p</span> <span class="o">&lt;</span><span class="n">evernote_file_path</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="o">&lt;</span><span class="n">octopress_title</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">octopress_categories</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">t</span> <span class="o">&lt;</span><span class="n">octopress_tags</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Options</span><span class="p">:</span>
</span><span class='line'>  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="nb">exit</span>
</span><span class='line'>  <span class="o">-</span><span class="n">f</span> <span class="n">FOLDER_NAME</span>        <span class="n">be</span> <span class="n">converted</span> <span class="n">Octopress</span> <span class="n">blog</span> <span class="nb">file</span> <span class="ow">and</span> <span class="n">images</span> <span class="nb">file</span> <span class="n">name</span>
</span><span class='line'>  <span class="o">-</span><span class="n">p</span> <span class="n">EVERNOTE_FILE_PATH</span>
</span><span class='line'>                        <span class="n">evernote</span> <span class="nb">file</span> <span class="n">path</span>
</span><span class='line'>  <span class="o">-</span><span class="n">T</span> <span class="n">OCTOPRESS_TITLE</span>    <span class="n">be</span> <span class="n">converted</span> <span class="n">Octopress</span> <span class="n">blog</span><span class="s">&#39;s title</span>
</span><span class='line'>  <span class="o">-</span><span class="n">c</span> <span class="n">OCTOPRESS_CATEGORIES</span>
</span><span class='line'>                        <span class="n">be</span> <span class="n">converted</span> <span class="n">Octopress</span> <span class="n">blog</span><span class="s">&#39;s categories</span>
</span><span class='line'>  <span class="o">-</span><span class="n">t</span> <span class="n">OCTOPRESS_TAGS</span>     <span class="n">be</span> <span class="n">converted</span> <span class="n">Octopress</span> <span class="n">blog</span><span class="s">&#39;s tags</span>
</span><span class='line'>
</span><span class='line'><span class="n">D</span><span class="p">:</span>\<span class="n">WorkSpace</span>\<span class="n">python_ws</span>\<span class="n">Evernote_Automatic_format_conversion</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行：(成功)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">D</span><span class="p">:</span>\<span class="n">WorkSpace</span>\<span class="n">python_ws</span>\<span class="n">Evernote_Automatic_format_conversion</span><span class="o">&gt;</span><span class="n">python</span> <span class="n">script</span>\<span class="n">evernoteToOctopressBlog</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="s">&quot;2016-12-1-python-get-command-line-arguments&quot;</span> <span class="o">-</span><span class="n">p</span> <span class="s">&quot;D:\WorkSpace</span><span class="se">\t</span><span class="s">est_ws\Learning Python 028 获取命令行参数 — Over — 2016年12月1日 星期 四.md&quot;</span> <span class="o">-</span><span class="n">T</span> <span class="s">&quot;Learning Python 028 获取命令行参数&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;python&quot;</span> <span class="o">-</span><span class="n">t</span> <span class="s">&quot;python3, python2, 命令行, 参数, args&quot;</span>
</span><span class='line'><span class="err">当前处理的这个马克飞象笔记是一个文件</span>
</span><span class='line'>
</span><span class='line'><span class="n">D</span><span class="p">:</span>\<span class="n">WorkSpace</span>\<span class="n">python_ws</span>\<span class="n">Evernote_Automatic_format_conversion</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>现在最新的代码在这里：<a href="https://github.com/AoboJaing/Evernote_Automatic_format_conversion/blob/v3.0/script/evernoteToOctopressBlog.py">https://github.com/AoboJaing/Evernote_Automatic_format_conversion/blob/v3.0/script/evernoteToOctopressBlog.py</a></p>

<hr />

<h2>基本完成了</h2>

<p>可以收工了！</p>

<p>&mdash; 2016-12-2 03:24:59</p>

<hr />

<h1>需要升级的地方</h1>

<ol>
<li>检查<code>folder_name</code> 字符串是否有非法字符和字符串的长度是否超过最大允许长度</li>
</ol>


<hr />

<p>参考网站：</p>

<p>Python 文件夹及文件操作（特全，特别详细）
<a href="http://www.cnblogs.com/feeland/p/4463682.html">http://www.cnblogs.com/feeland/p/4463682.html</a></p>

<hr />

<h1>2017年2月20日 星期一 发现一个bug：当我将图片链接写成：<img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1487601876744.png" alt="Alt text" /> 的时候，程序不会识别到这是一个图片链接</h1>

<p>2017-2-20 22:45:07 我想将这个bug记录下来。</p>

<p>现在，修改这个bug。修改思路：</p>

<p>我们需要修改这段代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">replaceImgLink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># 将里面的图片链接替换为**Octopress**本地链接的形式</span>
</span><span class='line'>    <span class="n">image_local_path</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;!\[Alt text\]\((.*?)\)&#39;</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/2017-2-21-python-Evernote-Auto-converted-to-Octopress-local-site-blog/1487603129502.png" alt="Alt text" /></p>

<p>我们在这里，将这里使用一次正则表达式，改为使用两次正则表达式。：</p>

<p>大概的伪码的样子是：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'>    <span class="n">image_local_path</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;!\[Alt text\]\((.*?)\)&#39;</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>第一步里面我们的正则表达式的匹配模板（<code>!\[Alt text(.*?)</code>）是一个前面有字符串，而后面没有字符串的一个字符串。那么这个时候，如果你想要程序正常的运行，你需要在这个匹配模板里面<code>(.*?)</code>后面添加上：<code>\Z</code>，用来表示后面没有字符串。（对着正则表达式的这个知识点，你可以参考<a href="http://www.aobosir.com/blog/2017/02/21/python-regular-expression-match-string-no-string-in-behind/">这篇博客</a>，这里对正则表达式的这个知识点有详细的介绍。）</p>

<p>修改为：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'>    <span class="n">image_local_path</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;!\[Alt text(.*?)\)&#39;</span><span class="p">,</span> <span class="n">evernote_data</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_local_path</span><span class="p">)):</span>
</span><span class='line'>        <span class="n">image_local_path_this</span> <span class="o">=</span> <span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>        <span class="n">image_local_path_step2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;]\((.*?)\Z&#39;</span><span class="p">,</span> <span class="n">image_local_path_this</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
</span><span class='line'>        <span class="n">image_local_path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">image_local_path_step2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>现在修改后的代码：<a href="https://github.com/AoboJaing/Evernote_Automatic_format_conversion">依然在GitHub里面</a>。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/03/06/Linux-Raspberry-Pi-use-guet-ipclient-Internet/">Linux 如何使用桂电ipclient出校器上网 --- 最新的方法 --- 可以使用</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/28/solve-qt-opencv-exited-with-code-0xc0000135--1073741515/">解决问题：Qt5 OpenCV “uring Startup Program Exited With Code 0xc0000135” “ Exited With Code -1073741515”</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/22/SolidWorks-how-to-modify-a-spare-parts-in-Assembly/">SolidWorks 在装配体中，如果想修改里面其中一个零部件，要怎么做</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/22/how-to-activation-Movable-joint-move-in-assembly/">SolidWorks 如果装配体里面的的装配体有动态关节，如何让它活动</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/21/SolidWorks-2012-download-install-cracked/">Windows 10 下载、安装、破解 SolidWorks 2012 Sp5.0 软件 图文教程</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 154%" href="/tags/3dda-yin/">3D打印</a>
<a style="font-size: 154%" href="/tags/arduino/">Arduino</a>
<a style="font-size: 129%" href="/tags/auto-control/">Auto Control</a>
<a style="font-size: 129%" href="/tags/c-number/">C#</a>
<a style="font-size: 147%" href="/tags/c-plus-plus/">C++</a>
<a style="font-size: 139%" href="/tags/git/">Git</a>
<a style="font-size: 139%" href="/tags/ide/">IDE</a>
<a style="font-size: 147%" href="/tags/intel-realsense/">Intel RealSense</a>
<a style="font-size: 129%" href="/tags/intel-realsense-sdk/">Intel RealSense SDK</a>
<a style="font-size: 139%" href="/tags/linux/">Linux</a>
<a style="font-size: 115%" href="/tags/meshmixer/">Meshmixer</a>
<a style="font-size: 154%" href="/tags/octopress/">Octopress</a>
<a style="font-size: 129%" href="/tags/pycharm/">PyCharm</a>
<a style="font-size: 168%" href="/tags/python/">Python</a>
<a style="font-size: 159%" href="/tags/python3/">Python3</a>
<a style="font-size: 210%" href="/tags/sql/">SQL</a>
<a style="font-size: 210%" href="/tags/sql-server/">SQL Server</a>
<a style="font-size: 139%" href="/tags/scrapy/">Scrapy</a>
<a style="font-size: 181%" href="/tags/solidworks/">SolidWorks</a>
<a style="font-size: 129%" href="/tags/ubuntu/">Ubuntu</a>
<a style="font-size: 129%" href="/tags/vs2015/">VS2015</a>
<a style="font-size: 129%" href="/tags/visual-studio-2015/">Visual Studio 2015</a>
<a style="font-size: 187%" href="/tags/windows/">Windows</a>
<a style="font-size: 115%" href="/tags/gbk/">gbk</a>
<a style="font-size: 147%" href="/tags/git/">git</a>
<a style="font-size: 115%" href="/tags/open/">open</a>
<a style="font-size: 115%" href="/tags/os/">os</a>
<a style="font-size: 129%" href="/tags/pcduino/">pcduino</a>
<a style="font-size: 129%" href="/tags/pcduino3b/">pcduino3B</a>
<a style="font-size: 129%" href="/tags/pip/">pip</a>
<a style="font-size: 168%" href="/tags/python/">python</a>
<a style="font-size: 129%" href="/tags/python2/">python2</a>
<a style="font-size: 168%" href="/tags/python3/">python3</a>
<a style="font-size: 115%" href="/tags/tag/">tag</a>
<a style="font-size: 115%" href="/tags/can-shu/">参数</a>
<a style="font-size: 115%" href="/tags/ming-ling-xing/">命令行</a>
<a style="font-size: 115%" href="/tags/zi-fu-chuan/">字符串</a>
<a style="font-size: 187%" href="/tags/cha-xun/">查询</a>
<a style="font-size: 129%" href="/tags/zheng-ze-biao-da-shi/">正则表达式</a>
<a style="font-size: 147%" href="/tags/pa-chong/">爬虫</a>
<a style="font-size: 115%" href="/tags/sheng-cheng-qi/">生成器</a>
<a style="font-size: 115%" href="/tags/jing-yan/">经验</a>
<a style="font-size: 139%" href="/tags/zi-dong-kong-zhi-yuan-li/">自动控制原理</a>
<a style="font-size: 129%" href="/tags/zhuang-pei-ti/">装配体</a>
<a style="font-size: 159%" href="/tags/ruan-jian-an-zhuang/">软件安装</a>

  </ul>
</section><section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/3dda-yin/'>3d打印 (6)</a></li>
<li class='category'><a href='/blog/categories/arduino/'>arduino (6)</a></li>
<li class='category'><a href='/blog/categories/auto-control/'>auto control (4)</a></li>
<li class='category'><a href='/blog/categories/c-number/'>c# (3)</a></li>
<li class='category'><a href='/blog/categories/c-plus-plus/'>c++ (4)</a></li>
<li class='category'><a href='/blog/categories/c-plus-plus-error/'>c++ error (1)</a></li>
<li class='category'><a href='/blog/categories/cmake-gui/'>cmake-gui (2)</a></li>
<li class='category'><a href='/blog/categories/eda/'>eda (1)</a></li>
<li class='category'><a href='/blog/categories/git-github/'>git_github (9)</a></li>
<li class='category'><a href='/blog/categories/learning-intel-realsense-librealsense/'>learning intel realsense librealsense (2)</a></li>
<li class='category'><a href='/blog/categories/learning-intel-realsense-sdk/'>learning intel realsense sdk (5)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (3)</a></li>
<li class='category'><a href='/blog/categories/linux-ming-ling/'>linux 命令 (1)</a></li>
<li class='category'><a href='/blog/categories/meshmixer/'>meshmixer (1)</a></li>
<li class='category'><a href='/blog/categories/opencv/'>opencv (1)</a></li>
<li class='category'><a href='/blog/categories/openni/'>openni (2)</a></li>
<li class='category'><a href='/blog/categories/pcduino/'>pcduino (3)</a></li>
<li class='category'><a href='/blog/categories/pcl/'>pcl (2)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (19)</a></li>
<li class='category'><a href='/blog/categories/python-shi-zhan/'>python 实战 (1)</a></li>
<li class='category'><a href='/blog/categories/python3-da-xing-wang-luo-pa-chong-shi-zhan/'>python3 大型网络爬虫实战 (11)</a></li>
<li class='category'><a href='/blog/categories/qt/'>qt (2)</a></li>
<li class='category'><a href='/blog/categories/ros/'>ros (2)</a></li>
<li class='category'><a href='/blog/categories/solidworks/'>solidworks (13)</a></li>
<li class='category'><a href='/blog/categories/sql/'>sql (29)</a></li>
<li class='category'><a href='/blog/categories/sql-server/'>sql server (29)</a></li>
<li class='category'><a href='/blog/categories/sw-urdf-exporter/'>sw_urdf_exporter (1)</a></li>
<li class='category'><a href='/blog/categories/use-octopress-build-blog-site/'>use octopress build blog site (5)</a></li>
<li class='category'><a href='/blog/categories/zheng-ze-biao-da-shi/'>正则表达式 (3)</a></li>
<li class='category'><a href='/blog/categories/wang-luo-pa-chong/'>网络爬虫 (1)</a></li>
<li class='category'><a href='/blog/categories/zi-dong-kong-zhi-yuan-li/'>自动控制原理 (4)</a></li>
<li class='category'><a href='/blog/categories/ruan-jian-an-zhuang/'>软件安装 (8)</a></li>

  </ul>
</section><section>
  <h1>访客统计</h1>
  <br/>
  <a href="http://s11.flagcounter.com/more/Km5"><img src="http://s11.flagcounter.com/count2/Km5/bg_ABCDFF/txt_000000/border_B29CB5/columns_2/maxflags_10/viewers_0/labels_0/pageviews_1/flags_0/percent_0/" alt="Flag Counter" border="0"></a>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Aobo Jaing -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
